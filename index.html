<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>NeroBank</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body { font-family: Arial; margin:0; background:#f4f6f8; }
header { background:#0a4b78; color:white; padding:20px; text-align:center; }
section { background:white; padding:20px; margin:20px auto; max-width:900px; border-radius:8px; }
h2 { color:#0a4b78; }
input, select, button { padding:10px; margin:5px 0; width:100%; }
button { background:#0a4b78; color:white; border:none; border-radius:5px; cursor:pointer; }
.card { background:#e8f0f7; padding:15px; border-radius:8px; margin-bottom:10px; }
</style>
</head>
<body>

<header>
<h1>NeroBank</h1>
<p id="slogan">Digital Banking Without Borders</p>
<select onchange="setLang(this.value)">
<option value="fr">FR</option>
<option value="en">EN</option>
<option value="es">ES</option>
<option value="it">IT</option>
<option value="de">DE</option>
<option value="pt">PT</option>
<option value="hr">HR</option>
</select>
</header>

<section id="auth">
<h2 id="authTitle">Connexion / Inscription</h2>
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Mot de passe">
<button onclick="register()">CrÃ©er un compte</button>
<button onclick="login()">Se connecter</button>
</section>

<section id="dashboard" style="display:none;">
<h2>Dashboard</h2>
<div class="card">ğŸ’° Solde : <span id="balance">0â‚¬</span></div>
<div class="card">ğŸ¦ IBAN : <span id="iban"></span></div>
<div class="card">ğŸªª KYC Status : <span id="kycStatus"></span></div>

<h3>KYC Upload</h3>
<input type="file" id="kycFile">
<button onclick="uploadKYC()">Envoyer document</button>

<h3>Virement (Simulation)</h3>
<input type="text" id="recipient" placeholder="IBAN destinataire">
<input type="number" id="amount" placeholder="Montant â‚¬">
<button onclick="transfer()">Envoyer virement</button>

<button onclick="logout()">Se dÃ©connecter</button>
</section>

<script>
// ğŸ”¹ CONFIG FIREBASE
const firebaseConfig = {
  apiKey: "AIzaSyCq0hnlEj5St9F3YmY2SdoWe07qO5zzi2U",
  authDomain: "nerobank-c4964.firebaseapp.com",
  projectId: "nerobank-c4964",
  storageBucket: "nerobank-c4964.firebasestorage.app",
  messagingSenderId: "330310891279",
  appId: "1:330310891279:web:cd0ad26d986e40eca7f07a"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// ğŸŒ Multilangue
const texts = {
fr:{authTitle:"Connexion / Inscription"},
en:{authTitle:"Login / Register"},
es:{authTitle:"Acceso / Registro"},
it:{authTitle:"Accesso / Registrazione"},
de:{authTitle:"Anmeldung / Registrierung"},
pt:{authTitle:"Entrar / Registrar"},
hr:{authTitle:"Prijava / Registracija"}
};
function setLang(l){ document.getElementById("authTitle").innerText = texts[l].authTitle; }

// ğŸ” Auth
function register(){
  auth.createUserWithEmailAndPassword(email.value,password.value)
  .then(u=>{
    db.collection("users").doc(u.user.uid).set({
      balance:1000,
      iban:"DE"+Math.floor(Math.random()*1000000000),
      kyc:"Pending"
    });
    alert("Compte crÃ©Ã© !");
  }).catch(e=>alert(e.message));
}

function login(){
  auth.signInWithEmailAndPassword(email.value,password.value)
  .then(()=>{
    auth.onAuthStateChanged(user=>{
      if(user){
        db.collection("users").doc(user.uid).get().then(doc=>{
          const d=doc.data();
          dashboard.style.display="block";
          auth.style.display="none";
          balance.innerText=d.balance+"â‚¬";
          iban.innerText=d.iban;
          kycStatus.innerText=d.kyc;
        });
      }
    });
  }).catch(e=>alert(e.message));
}

function logout(){ auth.signOut(); location.reload(); }

// ğŸ“¤ KYC Demo
function uploadKYC(){
  const user=auth.currentUser;
  db.collection("users").doc(user.uid).update({kyc:"Under Review"});
  alert("Document envoyÃ© (dÃ©mo)");
  kycStatus.innerText="Under Review";
}

// ğŸ’¸ Virement simulÃ©
function transfer(){
  let amt=parseFloat(amount.value);
  if(amt>0){
    alert("Virement simulÃ© envoyÃ© !");
  }
}
</script>
</body>
</html>
